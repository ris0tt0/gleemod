!function(e){var t={};function o(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=e,o.c=t,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=3)}([function(e,t,o){var n,r;
/*!
 * js-logger - http://github.com/jonnyreeves/js-logger
 * Jonny Reeves, http://jonnyreeves.co.uk/
 * js-logger may be freely distributed under the MIT license.
 */
/*!
 * js-logger - http://github.com/jonnyreeves/js-logger
 * Jonny Reeves, http://jonnyreeves.co.uk/
 * js-logger may be freely distributed under the MIT license.
 */
!function(s){"use strict";var i,l={};l.VERSION="1.6.0";var c={},a=function(e,t){return function(){return t.apply(e,arguments)}},u=function(){var e,t,o=arguments,n=o[0];for(t=1;t<o.length;t++)for(e in o[t])e in n||!o[t].hasOwnProperty(e)||(n[e]=o[t][e]);return n},f=function(e,t){return{value:e,name:t}};l.TRACE=f(1,"TRACE"),l.DEBUG=f(2,"DEBUG"),l.INFO=f(3,"INFO"),l.TIME=f(4,"TIME"),l.WARN=f(5,"WARN"),l.ERROR=f(8,"ERROR"),l.OFF=f(99,"OFF");var h=function(e){this.context=e,this.setLevel(e.filterLevel),this.log=this.info};h.prototype={setLevel:function(e){e&&"value"in e&&(this.context.filterLevel=e)},getLevel:function(){return this.context.filterLevel},enabledFor:function(e){var t=this.context.filterLevel;return e.value>=t.value},trace:function(){this.invoke(l.TRACE,arguments)},debug:function(){this.invoke(l.DEBUG,arguments)},info:function(){this.invoke(l.INFO,arguments)},warn:function(){this.invoke(l.WARN,arguments)},error:function(){this.invoke(l.ERROR,arguments)},time:function(e){"string"==typeof e&&e.length>0&&this.invoke(l.TIME,[e,"start"])},timeEnd:function(e){"string"==typeof e&&e.length>0&&this.invoke(l.TIME,[e,"end"])},invoke:function(e,t){i&&this.enabledFor(e)&&i(t,u({level:e},this.context))}};var m,d=new h({filterLevel:l.OFF});(m=l).enabledFor=a(d,d.enabledFor),m.trace=a(d,d.trace),m.debug=a(d,d.debug),m.time=a(d,d.time),m.timeEnd=a(d,d.timeEnd),m.info=a(d,d.info),m.warn=a(d,d.warn),m.error=a(d,d.error),m.log=m.info,l.setHandler=function(e){i=e},l.setLevel=function(e){for(var t in d.setLevel(e),c)c.hasOwnProperty(t)&&c[t].setLevel(e)},l.getLevel=function(){return d.getLevel()},l.get=function(e){return c[e]||(c[e]=new h(u({name:e},d.context)))},l.createDefaultHandler=function(e){(e=e||{}).formatter=e.formatter||function(e,t){t.name&&e.unshift("["+t.name+"]")};var t={},o=function(e,t){Function.prototype.apply.call(e,console,t)};return"undefined"==typeof console?function(){}:function(n,r){n=Array.prototype.slice.call(n);var s,i=console.log;r.level===l.TIME?(s=(r.name?"["+r.name+"] ":"")+n[0],"start"===n[1]?console.time?console.time(s):t[s]=(new Date).getTime():console.timeEnd?console.timeEnd(s):o(i,[s+": "+((new Date).getTime()-t[s])+"ms"])):(r.level===l.WARN&&console.warn?i=console.warn:r.level===l.ERROR&&console.error?i=console.error:r.level===l.INFO&&console.info?i=console.info:r.level===l.DEBUG&&console.debug?i=console.debug:r.level===l.TRACE&&console.trace&&(i=console.trace),e.formatter(n,r),o(i,n))}},l.useDefaults=function(e){l.setLevel(e&&e.defaultLevel||l.DEBUG),l.setHandler(l.createDefaultHandler(e))},void 0===(r="function"==typeof(n=l)?n.call(t,o,t,e):n)||(e.exports=r)}()},function(e,t,o){const n=o(0),r=o(2);e.exports=class{constructor(){n.info("model::constructor"),this.rows=0,this.columns=0,this.matchLimit=3,this.itemTypes=[],this.items=[]}initBoard(){n.info("model::initboard"),this.items=new Array(this.rows*this.columns);for(let e=0;e<this.items.length;++e)this.items[e]=new r}getItemByCoords(e,t){const o=e+t*this.columns;return this.items[o]}getItemCoord(e){const t=this.items.indexOf(e);return this.getItemCoordByIndex(t)}getItemCoordByIndex(e){return{x:e%this.rows,y:Math.floor(e/this.rows)}}getColumn(e){const t=[];for(let o=0;o<this.rows;o++)t.push(this.getItemByCoords(e,o));return t}getRow(e){const t=[];for(let o=0;o<this.columns;++o)t.push(this.getItemByCoords(o,e));return t}getBoardColumnList(){const e=[];for(let t=0;t<this.columns;t++)e.push(this.getColumn(t));return e}randomizeItems(){this.items.forEach(e=>e.cellType=this.itemTypes[Math.floor(Math.random()*this.itemTypes.length)])}swap(e,t,o,n){const r=this.getItemByCoords(e,t),s=this.getItemByCoords(o,n);if(r&&s){const e=r.cellType;r.cellType=s.cellType,s.cellType=e}}getMatches(){let e,t,o,n;const r=new Map,s=new Map;for(e=0;e<this.columns;++e)n=this.getColumn(e),(t=this.seachList(n)).size>0&&s.set(e,t);for(e=0;e<this.rows;++e)o=this.getRow(e),(t=this.seachList(o)).size>0&&r.set(e,t);return{columnMap:s,rowMap:r}}randomCellTypesList(e){return new Array(e).fill(null).map(()=>this.itemTypes[Math.round(Math.random()*e)])}seachList(e,t=NaN){let o,n,r,s;const i=new Map;for(isNaN(t)&&(t=this.matchLimit),r=[],s=0;s<e.length;s++)o=e[s],(n=e[s+1])&&o.cellType===n.cellType?r.push(s):(e[s-1]&&e[s].cellType===e[s-1].cellType&&r.push(s),r.length>t-1&&(i.has(o.cellType)||i.set(o.cellType,[]),i.get(o.cellType).push(r)),r=[]);return i}}},function(e,t){e.exports=class{constructor(e){this.cellType=e}}},function(e,t,o){"use strict";o.r(t);o(4),o(2),o(1);o(0)},function(e,t,o){const n=o(0),r=o(1);e.exports=class{constructor(e,t,o){n.info("controller::constructor"),this.model=new r,this.model.columns=e,this.model.rows=t,this.model.itemTypes=o}init(){n.info("controller::init"),this.model.initBoard(),this.model.randomizeItems()}swap(e,t,o){let n=e,r=t;switch(o.toLowerCase()){case"top":--r;break;case"bottom":++r;break;case"left":++n;break;case"right":--n}this.model.swap(e,t,n,r)}findMatches(e){const{columnMap:t,rowMap:o}=e,r=new Map,s=(e,t)=>{r.get(e)||r.set(e,{indices:[],replace:[]}),r.get(e).indices.push(t)};t.forEach((e,t)=>{e.forEach(e=>e.forEach(e=>e.forEach(e=>s(t,e))))}),o.forEach((e,t)=>{e.forEach(e=>e.forEach(e=>e.forEach(e=>s(e,t))))});for(let e of r.entries()){const t=e[0],o=e[1],r=o.indices.length,s=this.model.getColumn(t).map(e=>e.cellType);o.replace=this.model.randomCellTypesList(r),o.indices.sort(),o.indices.concat().reverse().map(e=>s.splice(e,1)),o.column=[...o.replace,...s];for(let e of o.column.entries())this.model.getItemByCoords(t,e[0]).cellType=e[1];n.info(this.model.getColumn(t))}return r}checkForMatches(){return this.findMatches(this.model.getMatches())}getBoard(){return this.model.getBoardColumnList()}removeMatchesFromBoard(){let e=this.checkForMatches();for(;e.size>0;)e=this.checkForMatches()}}}]);